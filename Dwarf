using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Threading;


class Program
{
    static void Main()
    {
        Random random = new Random();

        Console.ForegroundColor = ConsoleColor.White;

        int minLeft = 0;
        int maxLeft = 79;
        int minTop = 0;
        int maxTop = 22;

        char rock = '@';
        string dwarf = "(0)";

        int rockTop = minTop;
        int rockLeft = random.Next(1, maxLeft - 1);
        int dwarfLeft = 30;

        while (true)
        {
            //Rock movement
            if (rockTop != maxTop)
            {
                rockTop++;                
            }
            if (rockTop == maxTop)
            {
                if (rockLeft >= dwarfLeft && rockLeft <= dwarfLeft + dwarf.Length)
                {
                    // Game over
                    Console.Clear();
                    Console.ForegroundColor = ConsoleColor.Red;
                    Console.SetCursorPosition(33, 10);
                    Console.WriteLine("---GAME OVER---");
                    Console.ReadLine();
                    Main();
                }

                else
                {
                    
                }
            }

            //Dwarf movement
            if (Console.KeyAvailable)
            {
                ConsoleKeyInfo pressed = Console.ReadKey();
                if (pressed.Key == ConsoleKey.LeftArrow)
                {
                    if (dwarfLeft > minLeft)
                    {
                        // Move left
                        dwarfLeft = dwarfLeft - 1;
                    }
                }
                if (pressed.Key == ConsoleKey.RightArrow)
                {
                    if (dwarfLeft <= maxLeft - dwarf.Length)
                    {
                        // Move right    
                        dwarfLeft = dwarfLeft + 1;
                    }
                }
            }

            //Render ball
            Console.SetCursorPosition(rockLeft, rockTop);
            Console.Write(rock);

            //Dwarf paddle
            Console.SetCursorPosition(dwarfLeft, maxTop);
            Console.WriteLine(dwarf);

            Thread.Sleep(150);
            Console.Clear();
        }


    }
}
